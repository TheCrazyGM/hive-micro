<div class="card mb-3">
  <div class="card-body">
    <h2 class="mb-3">New Post</h2>
    <div id="replyNotice" class="alert alert-secondary d-none py-2 px-3 mb-3" role="alert"></div>
    <div id="replyPreview" class="mb-3 d-none"></div>
    <form id="postForm">
      <div class="mb-1 d-flex align-items-start gap-2">
        <div id="typingBee">
          <img id="typingBeeImg"
               src="{{ url_for('static', filename='img/right.png') }}"
               data-static="{{ url_for('static', filename='img/right.png') }}"
               data-anim="{{ url_for('static', filename='img/animate.gif') }}"
               alt="Bee"
               style="height: 48px; width: auto;" />
        </div>
        <textarea class="form-control flex-grow-1" id="postContent" rows="3" placeholder="What's on your mind?"
                  maxlength="{{ config['CONTENT_MAX_LEN'] }}"></textarea>
      </div>

      <div class="d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2">
        <button type="button" class="btn btn-sm btn-outline-secondary" id="addImageBtn">
          <i class="bi bi-image"></i> Add Image
        </button>
        <small class="text-muted">
          Markdown: <code>**bold**</code> <code>_italic_</code> <code>[link](…)</code> <code>![](…)</code> <code>`code`</code>
        </small>
      </div>
      <div class="form-text mb-3">Characters: <span id="charCounter">0 / {{ config['CONTENT_MAX_LEN'] }}</span></div>
      <button type="submit" class="btn btn-primary">Post</button>
    </form>
  </div>
</div>

<!-- Image Upload Modal -->
<div class="modal fade" id="imageUploadModal" tabindex="-1" aria-labelledby="imageUploadModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="imageUploadModalLabel">Add Image</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="mb-3">
          <label for="imageFileInput" class="form-label">Select image</label>
          <input type="file" class="form-control" id="imageFileInput" accept="image/*" />
          <div class="form-text">Your image will be uploaded to images.hive.blog using a Hive Keychain signature.</div>
        </div>
        <div id="imageUploadStatus" class="small text-muted"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="imageUploadBtn">Upload & Insert</button>
      </div>
    </div>
  </div>
</div>
