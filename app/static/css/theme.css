:root,
html[data-bs-theme="light"] {
  /* Hive brand palette */
  --hive-red: #E31337;
  --hive-black: #212529; /* Bootstrap default dark text */
  --hive-grey: #e7e7f1;
  --hive-lightgrey: #f0f0f8;

  /* Map to Bootstrap CSS variables */
  --bs-primary: var(--hive-red);
  --bs-primary-rgb: 227, 19, 55;
  --bs-secondary: var(--hive-grey);
  --bs-body-bg: var(--hive-lightgrey);
  --bs-secondary-bg: #f8f9fa; /* used by bg-body-secondary */
  --bs-tertiary-bg: #f1f3f5;  /* used by bg-body-tertiary (navbar/footer) */
  --bs-body-color: var(--hive-black);
  /* Links use RGB vars in Bootstrap 5.3 */
  --bs-link-color-rgb: 227, 19, 55; /* Hive red */
  --bs-link-color: var(--hive-red);
  /* Hover: slightly darker red; color-mix supported in modern browsers */
  --bs-link-hover-color: color-mix(in srgb, var(--hive-red), #000 15%);
  --bs-link-hover-color-rgb: 200, 16, 47; /* fallback approximate */
  --bs-focus-ring-color: rgba(227, 19, 55, 0.25);

  /* Optional accents */
  --bs-border-color: #dee2e6;
  --bs-code-color: var(--hive-red);
  /* Surfaces */
  --surface-1: #ffffff;         /* cards, panels */
  --surface-2: #f6f7f9;         /* soft containers */
}

/* Dark theme variable overrides */
html[data-bs-theme="dark"] {
  /* Keep brand red, adjust neutrals for dark */
  --hive-red: #E31337;
  --hive-black: #e6edf3; /* light text */
  --hive-grey: #2d333b;
  --hive-lightgrey: #0d1117; /* body background */

  /* Bootstrap mappings */
  --bs-primary: var(--hive-red);
  --bs-primary-rgb: 227, 19, 55;
  --bs-secondary: var(--hive-grey);
  --bs-body-bg: var(--hive-lightgrey);
  --bs-secondary-bg: #161b22; /* darker panel */
  --bs-tertiary-bg: #0f141a;  /* navbar/footer bg */
  --bs-body-color: var(--hive-black);
  --bs-link-color-rgb: 227, 19, 55;
  --bs-link-color: var(--hive-red);
  --bs-link-hover-color: color-mix(in srgb, var(--hive-red), white 15%);
  --bs-link-hover-color-rgb: 255, 90, 110; /* rough */
  --bs-focus-ring-color: rgba(227, 19, 55, 0.35);
  --bs-border-color: #30363d;
  --bs-code-color: #ff7b72; /* accent for inline code */
  /* Surfaces */
  --surface-1: #0f141a;
  --surface-2: #161b22;
}

/* Fallback for browsers without color-mix */
@supports not (color: color-mix(in srgb, red, black)) {
  :root {
    --bs-link-hover-color: #c8102f; /* close darker red */
  }
}

/* Navbar tweaks */
.navbar {
  --bs-navbar-color: rgba(33, 37, 41, 0.8);
  --bs-navbar-hover-color: var(--hive-black);
  --bs-navbar-brand-color: var(--hive-black);
  --bs-navbar-brand-hover-color: var(--hive-red);
  backdrop-filter: saturate(1.4) blur(6px);
  -webkit-backdrop-filter: saturate(1.4) blur(6px);
}
html[data-bs-theme="dark"] .navbar {
  --bs-navbar-color: rgba(230, 237, 243, 0.8);
  --bs-navbar-hover-color: var(--hive-black);
  --bs-navbar-brand-color: var(--hive-black);
  --bs-navbar-brand-hover-color: var(--hive-red);
}

.navbar .nav-link.active,
.navbar .nav-link:focus,
.navbar .nav-link:hover {
  color: var(--hive-red);
}
.navbar .nav-link.active {
  border-bottom: 2px solid var(--hive-red);
}

/* Primary button uses Hive red */
.btn-primary {
  --bs-btn-color: #fff;
  --bs-btn-bg: var(--hive-red);
  --bs-btn-border-color: var(--hive-red);
  --bs-btn-hover-color: #fff;
  --bs-btn-hover-bg: color-mix(in srgb, var(--hive-red), #000 10%);
  --bs-btn-hover-border-color: color-mix(in srgb, var(--hive-red), #000 10%);
  --bs-btn-active-color: #fff;
  --bs-btn-active-bg: color-mix(in srgb, var(--hive-red), #000 15%);
  --bs-btn-active-border-color: color-mix(in srgb, var(--hive-red), #000 15%);
}
html[data-bs-theme="dark"] .btn-primary {
  --bs-btn-color: #fff;
  --bs-btn-hover-color: #fff;
  --bs-btn-hover-bg: color-mix(in srgb, var(--hive-red), white 8%);
  --bs-btn-hover-border-color: color-mix(in srgb, var(--hive-red), white 8%);
  --bs-btn-active-color: #fff;
  --bs-btn-active-bg: color-mix(in srgb, var(--hive-red), white 12%);
  --bs-btn-active-border-color: color-mix(in srgb, var(--hive-red), white 12%);
}
@supports not (color: color-mix(in srgb, red, black)) {
  .btn-primary {
    --bs-btn-hover-bg: #cb1231;
    --bs-btn-hover-border-color: #cb1231;
    --bs-btn-active-bg: #b4102b;
    --bs-btn-active-border-color: #b4102b;
  }
}

/* Outline primary matches Hive red */
.btn-outline-primary {
  --bs-btn-color: var(--hive-red);
  --bs-btn-border-color: var(--hive-red);
  --bs-btn-hover-bg: var(--hive-red);
  --bs-btn-hover-border-color: var(--hive-red);
  --bs-btn-hover-color: #fff;
}
html[data-bs-theme="dark"] .btn-outline-primary {
  --bs-btn-color: var(--hive-red);
  --bs-btn-border-color: var(--hive-red);
  --bs-btn-hover-bg: var(--hive-red);
  --bs-btn-hover-border-color: var(--hive-red);
  --bs-btn-hover-color: #fff;
}

/* Badges */
.badge.text-bg-primary {
  background-color: var(--hive-red) !important;
}

/* Cards and footer adopt body bg subtly */
.card {
  border-radius: 0.75rem;
  background-color: var(--surface-1);
  border-color: var(--bs-border-color);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.06);
}
html[data-bs-theme="dark"] .card {
  box-shadow: 0 8px 22px rgba(0, 0, 0, 0.35);
}

.card .card-header {
  background-color: var(--surface-2);
  border-bottom-color: var(--bs-border-color);
}

.list-group-item {
  background-color: var(--surface-1);
}

/* Utility classes for brand colors if needed */
.bg-hive-red { background-color: var(--hive-red) !important; }
.text-hive-red { color: var(--hive-red) !important; }
.bg-hive-light { background-color: var(--hive-lightgrey) !important; }
.bg-hive-grey { background-color: var(--hive-grey) !important; }

/* Links (do not override button anchors) */
a:not(.btn) {
  color: var(--hive-red);
  text-decoration: underline;
  text-decoration-color: color-mix(in srgb, var(--hive-red), transparent 60%);
  text-underline-offset: 2px;
}
a:not(.btn):visited {
  color: var(--hive-red);
}
a:not(.btn):hover {
  color: var(--bs-link-hover-color);
  text-decoration-color: var(--hive-red);
}

/* Softer alerts, badges, and chips */
/* High-contrast tag chip using Hive red */
.tag-chip {
  background-color: var(--hive-red) !important;
  color: #fff !important;
  border: 1px solid color-mix(in srgb, var(--hive-red), #000 15%);
}
.tag-chip:hover,
.tag-chip:focus {
  background-color: color-mix(in srgb, var(--hive-red), #000 10%) !important;
  color: #fff !important;
}
html[data-bs-theme="dark"] .tag-chip {
  background-color: color-mix(in srgb, var(--hive-red), black 10%) !important;
  color: #fff !important;
  border-color: color-mix(in srgb, var(--hive-red), black 25%) !important;
}
html[data-bs-theme="dark"] .tag-chip:hover,
html[data-bs-theme="dark"] .tag-chip:focus {
  background-color: color-mix(in srgb, var(--hive-red), black 18%) !important;
}

/* Form controls focus ring in Hive red */
.form-control:focus,
.form-select:focus,
.form-check-input:focus {
  border-color: var(--hive-red);
  box-shadow: 0 0 0 .25rem var(--bs-focus-ring-color);
}

/* Checkbox / radio colors */
.form-check-input:checked {
  background-color: var(--hive-red);
  border-color: var(--hive-red);
}
.form-check-input {
  accent-color: var(--hive-red);
}

/* Pagination active item */
.pagination .page-item.active .page-link {
  background-color: var(--hive-red);
  border-color: var(--hive-red);
}
.pagination .page-link {
  color: var(--hive-red);
}

/* Post/Feed layout niceties */
.post-meta {
  font-size: 0.8rem;
  color: var(--bs-secondary-color);
  gap: .25rem; /* tighter than gap-2 */
}
.post-meta a {
  color: var(--bs-secondary-color);
}
.post-meta a:hover {
  color: var(--bs-link-hover-color);
  text-decoration: underline;
}
.post-meta code {
  color: var(--bs-secondary-color);
  word-break: break-all;
}
.reply-indicator {
  color: var(--bs-secondary-color);
}

/* Accordion polish */
.accordion-button {
  background-color: var(--surface-2);
}
.accordion-button:not(.collapsed) {
  color: inherit;
  background-color: var(--surface-2);
  box-shadow: inset 0 -1px 0 var(--bs-border-color);
}
.accordion-item {
  background-color: var(--surface-1);
  border-color: var(--bs-border-color);
  border-radius: 0.75rem;
  overflow: hidden;
}

/* Keep long trx ids to a single line with ellipsis */
.trx-hash {
  display: inline-block;
  max-width: 40ch; /* roughly fits within meta line */
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  vertical-align: bottom;
}

/* Ensure the left meta column can shrink/truncate in flex */
.meta-left {
  min-width: 0;
}

.meta-right {
  flex: 0 0 auto;
}

/* --- Code & Syntax Highlighting (Pygments via codehilite) --- */
/* Inline code */
code {
  background: #f8f9fa;
  color: var(--bs-body-color);
  padding: .2rem .35rem;
  border-radius: 4px;
}

/* Code blocks */
.codehilite {
  background: #f8f9fa;
  color: #212529;
  border-radius: 6px;
  overflow: auto;
  border: 1px solid var(--bs-border-color);
}
.codehilite .hll { /* remove highlight line background */
  background: transparent !important;
}
.codehilite pre {
  margin: 0;
  padding: .75rem 1rem;
}
pre code { /* prevent double-styling inside blocks */
  background: transparent;
  padding: 0;
}

/* Plain pre/code blocks (used for raw JSON panes) */
.pre-plain {
  background: transparent !important;
  color: inherit;
  border: 0;
  padding: .75rem 0;
}
.pre-plain code {
  background: transparent !important;
  color: inherit;
  padding: 0;
}

/* Common token colors (minimal set) */
.codehilite .k { color: #005cc5; font-weight: 600; } /* Keyword */
.codehilite .o { color: #d73a49; } /* Operator */
.codehilite .c, .codehilite .cm, .codehilite .c1, .codehilite .cs, .codehilite .cp { color: #6a737d; font-style: italic; } /* Comments */
.codehilite .na, .codehilite .nc, .codehilite .nd, .codehilite .nn { color: #6f42c1; }
.codehilite .nb, .codehilite .m { color: #005cc5; }
.codehilite .nf { color: #6f42c1; }
.codehilite .nt { color: #22863a; }
.codehilite .nv, .codehilite .no { color: #e36209; }
.codehilite .s, .codehilite .s1, .codehilite .s2, .codehilite .sb, .codehilite .sc, .codehilite .sd, .codehilite .se, .codehilite .sh, .codehilite .si, .codehilite .sr, .codehilite .ss, .codehilite .sx { color: #032f62; }
.codehilite .p { color: inherit; }

/* Dark theme adjustments */
html[data-bs-theme="dark"] code {
  background: #1e2329;
  color: #e6edf3;
}
html[data-bs-theme="dark"] .codehilite {
  background: #1e2329;
  color: #e6edf3;
  border-color: #2d333b;
}
html[data-bs-theme="dark"] .codehilite .hll {
  background: transparent !important;
}
html[data-bs-theme="dark"] .codehilite .c,
html[data-bs-theme="dark"] .codehilite .cm,
html[data-bs-theme="dark"] .codehilite .c1,
html[data-bs-theme="dark"] .codehilite .cs,
html[data-bs-theme="dark"] .codehilite .cp { color: #8b949e; font-style: italic; }

/* Responsive images inside post content */
.card-text img {
  max-width: 100%;
  height: auto;
  display: block;
  margin: .5rem 0;
  border-radius: 6px;
}

/* Smooth theme transitions for common surfaces */
html, body,
.card, .list-group-item, .accordion-button, .accordion-item,
.navbar, .navbar * {
  transition: background-color .25s ease, color .25s ease, border-color .25s ease;
}
